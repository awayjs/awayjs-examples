{
  "version": 3,
  "sources": [
    "node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "src/Intermediate_MD5Animation.ts",
    "Intermediate_MD5Animation.js"
  ],
  "names": [
    "e",
    "t",
    "n",
    "r",
    "s",
    "o",
    "u",
    "a",
    "require",
    "i",
    "f",
    "Error",
    "code",
    "l",
    "exports",
    "call",
    "length",
    1,
    "module",
    "AssetEvent",
    "LoaderEvent",
    "UVTransform",
    "AssetLibrary",
    "AssetLoaderContext",
    "AssetType",
    "URLRequest",
    "Keyboard",
    "RequestAnimationFrame",
    "DisplayObjectContainer",
    "View",
    "LookAtController",
    "DirectionalLight",
    "Billboard",
    "PointLight",
    "Skybox",
    "NearDirectionalShadowMapper",
    "StaticLightPicker",
    "PrimitivePlanePrefab",
    "SkeletonAnimator",
    "CrossfadeTransition",
    "AnimationStateEvent",
    "DefaultRenderer",
    "MethodMaterial",
    "MethodRendererPool",
    "EffectFogMethod",
    "ShadowNearMethod",
    "ShadowSoftMethod",
    "MD5AnimParser",
    "MD5MeshParser",
    "Intermediate_MD5Animation",
    "this",
    "stateTransition",
    "currentRotationInc",
    "count",
    "_time",
    "init",
    "prototype",
    "initEngine",
    "initLights",
    "initMaterials",
    "initObjects",
    "initListeners",
    "view",
    "scene",
    "camera",
    "projection",
    "far",
    "z",
    "y",
    "placeHolder",
    "cameraController",
    "redLight",
    "x",
    "color",
    "addChild",
    "blueLight",
    "whiteLight",
    "castsShadows",
    "ambient",
    "ambientColor",
    "shadowMapper",
    "lightPicker",
    "shadowMapMethod",
    "epsilon",
    "fogMethod",
    "redLightMaterial",
    "alphaBlending",
    "addEffectMethod",
    "blueLightMaterial",
    "groundMaterial",
    "smooth",
    "repeat",
    "shadowMethod",
    "bodyMaterial",
    "gloss",
    "specular",
    "gobMaterial",
    "animateUVs",
    "redSprite",
    "width",
    "height",
    "blueSprite",
    "enableParser",
    "ground",
    "getNewObject",
    "material",
    "geometry",
    "scaleUV",
    "_this",
    "window",
    "onresize",
    "event",
    "onResize",
    "document",
    "onkeydown",
    "onKeyDown",
    "onkeyup",
    "onKeyUp",
    "_timer",
    "onEnterFrame",
    "start",
    "assetLoaderContext",
    "dependencyBaseUrl",
    "addEventListener",
    "ASSET_COMPLETE",
    "onAssetComplete",
    "RESOURCE_COMPLETE",
    "onResourceComplete",
    "load",
    "dt",
    "update",
    "mesh",
    "subMeshes",
    "uvTransform",
    "offsetV",
    "rotationY",
    "Math",
    "sin",
    "cos",
    "render",
    "asset",
    "assetType",
    "ANIMATION_NODE",
    "node",
    "name",
    "assetNamespace",
    "animationSet",
    "addAnimation",
    "IDLE_NAME",
    "WALK_NAME",
    "looping",
    "PLAYBACK_COMPLETE",
    "onPlaybackComplete",
    "stop",
    "ANIMATION_SET",
    "animator",
    "skeleton",
    "ANIM_NAMES",
    "SKELETON",
    "MESH",
    "url",
    "cubeTexture",
    "assets",
    "skyBox",
    "texture",
    "normalMap",
    "specularMap",
    "activeState",
    "animationState",
    "onceAnim",
    "play",
    "currentAnim",
    "playbackSpeed",
    "isMoving",
    "movementDirection",
    "isRunning",
    "RUN_SPEED",
    "WALK_SPEED",
    "IDLE_SPEED",
    "playAction",
    "val",
    "ACTION_SPEED",
    "keyCode",
    "SHIFT",
    "updateMovement",
    "UP",
    "W",
    "Z",
    "DOWN",
    "S",
    "LEFT",
    "A",
    "Q",
    "ROTATION_SPEED",
    "RIGHT",
    "D",
    "NUMBER_1",
    "NUMBER_2",
    "NUMBER_3",
    "NUMBER_4",
    "NUMBER_5",
    "NUMBER_6",
    "NUMBER_7",
    "NUMBER_8",
    "NUMBER_9",
    "dir",
    "innerWidth",
    "innerHeight",
    "Array",
    "onload",
    "awayjs-core/lib/events/AssetEvent",
    "undefined",
    "awayjs-core/lib/events/LoaderEvent",
    "awayjs-core/lib/geom/UVTransform",
    "awayjs-core/lib/library/AssetLibrary",
    "awayjs-core/lib/library/AssetLoaderContext",
    "awayjs-core/lib/library/AssetType",
    "awayjs-core/lib/net/URLRequest",
    "awayjs-core/lib/ui/Keyboard",
    "awayjs-core/lib/utils/RequestAnimationFrame",
    "awayjs-display/lib/containers/DisplayObjectContainer",
    "awayjs-display/lib/containers/View",
    "awayjs-display/lib/controllers/LookAtController",
    "awayjs-display/lib/entities/Billboard",
    "awayjs-display/lib/entities/DirectionalLight",
    "awayjs-display/lib/entities/PointLight",
    "awayjs-display/lib/entities/Skybox",
    "awayjs-display/lib/materials/lightpickers/StaticLightPicker",
    "awayjs-display/lib/materials/shadowmappers/NearDirectionalShadowMapper",
    "awayjs-display/lib/prefabs/PrimitivePlanePrefab",
    "awayjs-methodmaterials/lib/MethodMaterial",
    "awayjs-methodmaterials/lib/methods/EffectFogMethod",
    "awayjs-methodmaterials/lib/methods/ShadowNearMethod",
    "awayjs-methodmaterials/lib/methods/ShadowSoftMethod",
    "awayjs-methodmaterials/lib/pool/MethodRendererPool",
    "awayjs-parsers/lib/MD5AnimParser",
    "awayjs-parsers/lib/MD5MeshParser",
    "awayjs-renderergl/lib/DefaultRenderer",
    "awayjs-renderergl/lib/animators/SkeletonAnimator",
    "awayjs-renderergl/lib/animators/transitions/CrossfadeTransition",
    "awayjs-renderergl/lib/events/AnimationStateEvent"
  ],
  "mappings": "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",
  "file": "Intermediate_MD5Animation.js",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "﻿/*\n\nMD5 animation loading and interaction example in Away3d\n\nDemonstrates:\n\nHow to load MD5 mesh and anim files with bones animation from embedded resources.\nHow to map animation data after loading in order to playback an animation sequence.\nHow to control the movement of a game character using keys.\n\nCode by Rob Bateman & David Lenaerts\nrob@infiniteturtles.co.uk\nhttp://www.infiniteturtles.co.uk\ndavid.lenaerts@gmail.com\nhttp://www.derschmale.com\n\nThis code is distributed under the MIT License\n\nCopyright (c) The Away Foundation http://www.theawayfoundation.org\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the “Software”), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport LoaderEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/LoaderEvent\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport UVTransform\t\t\t\t\t= require(\"awayjs-core/lib/geom/UVTransform\");\nimport AssetLibrary\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetLibrary\");\nimport AssetLoaderContext\t\t\t= require(\"awayjs-core/lib/library/AssetLoaderContext\");\nimport AssetType\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetType\");\nimport URLRequest\t\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\nimport Keyboard\t\t\t\t\t\t= require(\"awayjs-core/lib/ui/Keyboard\");\nimport ImageCubeTexture\t\t\t\t= require(\"awayjs-core/lib/textures/ImageCubeTexture\");\nimport ImageTexture\t\t\t\t\t= require(\"awayjs-core/lib/textures/ImageTexture\");\nimport RequestAnimationFrame\t\t= require(\"awayjs-core/lib/utils/RequestAnimationFrame\");\n\nimport DisplayObjectContainer\t\t= require(\"awayjs-display/lib/containers/DisplayObjectContainer\");\nimport Scene\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/Scene\");\nimport Loader\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/Loader\");\nimport View\t\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/View\");\nimport LookAtController\t\t\t\t= require(\"awayjs-display/lib/controllers/LookAtController\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport DirectionalLight\t\t\t\t= require(\"awayjs-display/lib/entities/DirectionalLight\");\nimport Billboard\t\t\t\t\t= require(\"awayjs-display/lib/entities/Billboard\");\nimport Mesh\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Mesh\");\nimport PointLight\t\t\t\t\t= require(\"awayjs-display/lib/entities/PointLight\");\nimport Skybox\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Skybox\");\nimport NearDirectionalShadowMapper\t= require(\"awayjs-display/lib/materials/shadowmappers/NearDirectionalShadowMapper\");\nimport StaticLightPicker\t\t\t= require(\"awayjs-display/lib/materials/lightpickers/StaticLightPicker\");\nimport PrimitivePlanePrefab\t\t\t= require(\"awayjs-display/lib/prefabs/PrimitivePlanePrefab\");\n\nimport SkeletonAnimationSet\t\t\t= require(\"awayjs-renderergl/lib/animators/SkeletonAnimationSet\");\nimport SkeletonAnimator\t\t\t\t= require(\"awayjs-renderergl/lib/animators/SkeletonAnimator\");\nimport Skeleton\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/Skeleton\");\nimport SkeletonClipNode\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/SkeletonClipNode\");\nimport CrossfadeTransition\t\t\t= require(\"awayjs-renderergl/lib/animators/transitions/CrossfadeTransition\");\nimport AnimationStateEvent\t\t\t= require(\"awayjs-renderergl/lib/events/AnimationStateEvent\");\n\nimport DefaultRenderer\t\t\t\t= require(\"awayjs-renderergl/lib/DefaultRenderer\");\n\nimport MethodMaterial\t\t\t\t= require(\"awayjs-methodmaterials/lib/MethodMaterial\");\nimport MethodRendererPool\t\t\t= require(\"awayjs-methodmaterials/lib/pool/MethodRendererPool\");\nimport EffectFogMethod\t\t\t\t= require(\"awayjs-methodmaterials/lib/methods/EffectFogMethod\");\nimport ShadowNearMethod\t\t\t\t= require(\"awayjs-methodmaterials/lib/methods/ShadowNearMethod\");\nimport ShadowSoftMethod\t\t\t\t= require(\"awayjs-methodmaterials/lib/methods/ShadowSoftMethod\");\n\nimport MD5AnimParser\t\t\t\t= require(\"awayjs-parsers/lib/MD5AnimParser\");\nimport MD5MeshParser\t\t\t\t= require(\"awayjs-parsers/lib/MD5MeshParser\");\n\nclass Intermediate_MD5Animation\n{\n\t//engine variables\n\tprivate scene:Scene;\n\tprivate camera:Camera;\n\tprivate view:View;\n\tprivate cameraController:LookAtController;\n\n\t//animation variables\n\tprivate animator:SkeletonAnimator;\n\tprivate animationSet:SkeletonAnimationSet;\n\tprivate stateTransition:CrossfadeTransition = new CrossfadeTransition(0.5);\n\tprivate skeleton:Skeleton;\n\tprivate isRunning:Boolean;\n\tprivate isMoving:Boolean;\n\tprivate movementDirection:number;\n\tprivate onceAnim:string;\n\tprivate currentAnim:string;\n\tprivate currentRotationInc:number = 0;\n\n\t//animation constants\n\tprivate static IDLE_NAME:string = \"idle2\";\n\tprivate static WALK_NAME:string = \"walk7\";\n\tprivate static ANIM_NAMES:Array<string> = new Array<string>(Intermediate_MD5Animation.IDLE_NAME, Intermediate_MD5Animation.WALK_NAME, \"attack3\", \"turret_attack\", \"attack2\", \"chest\", \"roar1\", \"leftslash\", \"headpain\", \"pain1\", \"pain_luparm\", \"range_attack2\");\n\tprivate static ROTATION_SPEED:number = 3;\n\tprivate static RUN_SPEED:number = 2;\n\tprivate static WALK_SPEED:number = 1;\n\tprivate static IDLE_SPEED:number = 1;\n\tprivate static ACTION_SPEED:number = 1;\n\n\t//light objects\n\tprivate redLight:PointLight;\n\tprivate blueLight:PointLight;\n\tprivate whiteLight:DirectionalLight;\n\tprivate lightPicker:StaticLightPicker;\n\tprivate shadowMapMethod:ShadowNearMethod;\n\tprivate fogMethod:EffectFogMethod;\n\tprivate count:number = 0;\n\n\t//material objects\n\tprivate redLightMaterial:MethodMaterial;\n\tprivate blueLightMaterial:MethodMaterial;\n\tprivate groundMaterial:MethodMaterial;\n\tprivate bodyMaterial:MethodMaterial;\n\tprivate gobMaterial:MethodMaterial;\n\tprivate cubeTexture:ImageCubeTexture;\n\n\t//scene objects\n\tprivate placeHolder:DisplayObjectContainer;\n\tprivate mesh:Mesh;\n\tprivate ground:Mesh;\n\tprivate skyBox:Skybox;\n\n\tprivate _timer:RequestAnimationFrame;\n\tprivate _time:number = 0;\n\n\t/**\n\t * Constructor\n\t */\n\tconstructor()\n\t{\n\t\tthis.init();\n\t}\n\n\t/**\n\t * Global initialise function\n\t */\n\tprivate init():void\n\t{\n\t\tthis.initEngine();\n\t\t//this.initText();\n\t\tthis.initLights();\n\t\tthis.initMaterials();\n\t\tthis.initObjects();\n\t\tthis.initListeners();\n\t}\n\n\t/**\n\t * Initialise the engine\n\t */\n\tprivate initEngine():void\n\t{\n\t\tthis.view = new View(new DefaultRenderer(MethodRendererPool));\n\t\tthis.scene = this.view.scene;\n\t\tthis.camera = this.view.camera;\n\n\t\tthis.camera.projection.far = 5000;\n\t\tthis.camera.z = -200;\n\t\tthis.camera.y = 160;\n\n\t\t//setup controller to be used on the camera\n\t\tthis.placeHolder = new DisplayObjectContainer();\n\t\tthis.placeHolder.y = 50;\n\t\tthis.cameraController = new LookAtController(this.camera, this.placeHolder);\n\t}\n\n\t/**\n\t * Create an instructions overlay\n\t */\n//\t\tprivate initText():void\n//\t\t{\n//\t\t\ttext = new TextField();\n//\t\t\ttext.defaultTextFormat = new TextFormat(\"Verdana\", 11, 0xFFFFFF);\n//\t\t\ttext.width = 240;\n//\t\t\ttext.height = 100;\n//\t\t\ttext.selectable = false;\n//\t\t\ttext.mouseEnabled = false;\n//\t\t\ttext.text = \"Cursor keys / WSAD - move\\n\";\n//\t\t\ttext.appendText(\"SHIFT - hold down to run\\n\");\n//\t\t\ttext.appendText(\"numbers 1-9 - Attack\\n\");\n//\t\t\ttext.filters = [new DropShadowFilter(1, 45, 0x0, 1, 0, 0)];\n//\n//\t\t\taddChild(text);\n//\t\t}\n\n\t/**\n\t * Initialise the entities\n\t */\n\tprivate initLights():void\n\t{\n\t\t//create a light for shadows that mimics the sun's position in the skybox\n\t\tthis.redLight = new PointLight();\n\t\tthis.redLight.x = -1000;\n\t\tthis.redLight.y = 200;\n\t\tthis.redLight.z = -1400;\n\t\tthis.redLight.color = 0xff1111;\n\t\tthis.scene.addChild(this.redLight);\n\n\t\tthis.blueLight = new PointLight();\n\t\tthis.blueLight.x = 1000;\n\t\tthis.blueLight.y = 200;\n\t\tthis.blueLight.z = 1400;\n\t\tthis.blueLight.color = 0x1111ff;\n\t\tthis.scene.addChild(this.blueLight);\n\n\t\tthis.whiteLight = new DirectionalLight(-50, -20, 10);\n\t\tthis.whiteLight.color = 0xffffee;\n\t\tthis.whiteLight.castsShadows = true;\n\t\tthis.whiteLight.ambient = 1;\n\t\tthis.whiteLight.ambientColor = 0x303040;\n\t\tthis.whiteLight.shadowMapper = new NearDirectionalShadowMapper(.2);\n\t\tthis.scene.addChild(this.whiteLight);\n\n\t\tthis.lightPicker = new StaticLightPicker([this.redLight, this.blueLight, this.whiteLight]);\n\n\n\t\t//create a global shadow method\n\t\tthis.shadowMapMethod = new ShadowNearMethod(new ShadowSoftMethod(this.whiteLight, 15, 8));\n\t\tthis.shadowMapMethod.epsilon = .1;\n\n\t\t//create a global fog method\n\t\tthis.fogMethod = new EffectFogMethod(0, this.camera.projection.far*0.5, 0x000000);\n\t}\n\n\t/**\n\t * Initialise the materials\n\t */\n\tprivate initMaterials():void\n\t{\n\t\t//red light material\n\t\tthis.redLightMaterial = new MethodMaterial();\n\t\tthis.redLightMaterial.alphaBlending = true;\n\t\tthis.redLightMaterial.addEffectMethod(this.fogMethod);\n\n\t\t//blue light material\n\t\tthis.blueLightMaterial = new MethodMaterial();\n\t\tthis.blueLightMaterial.alphaBlending = true;\n\t\tthis.blueLightMaterial.addEffectMethod(this.fogMethod);\n\n\t\t//ground material\n\t\tthis.groundMaterial = new MethodMaterial();\n\t\tthis.groundMaterial.smooth = true;\n\t\tthis.groundMaterial.repeat = true;\n\t\tthis.groundMaterial.lightPicker = this.lightPicker;\n\t\tthis.groundMaterial.shadowMethod = this.shadowMapMethod;\n\t\tthis.groundMaterial.addEffectMethod(this.fogMethod);\n\n\t\t//body material\n\t\tthis.bodyMaterial = new MethodMaterial();\n\t\tthis.bodyMaterial.gloss = 20;\n\t\tthis.bodyMaterial.specular = 1.5;\n\t\tthis.bodyMaterial.addEffectMethod(this.fogMethod);\n\t\tthis.bodyMaterial.lightPicker = this.lightPicker;\n\t\tthis.bodyMaterial.shadowMethod = this.shadowMapMethod;\n\n\t\t//gob material\n\t\tthis.gobMaterial = new MethodMaterial();\n\t\tthis.gobMaterial.alphaBlending = true;\n\t\tthis.gobMaterial.smooth = true;\n\t\tthis.gobMaterial.repeat = true;\n\t\tthis.gobMaterial.animateUVs = true;\n\t\tthis.gobMaterial.addEffectMethod(this.fogMethod);\n\t\tthis.gobMaterial.lightPicker = this.lightPicker;\n\t\tthis.gobMaterial.shadowMethod = this.shadowMapMethod;\n\t}\n\n\t/**\n\t * Initialise the scene objects\n\t */\n\tprivate initObjects():void\n\t{\n\t\t//create light billboards\n\t\tvar redSprite:Billboard = new Billboard(this.redLightMaterial);\n\t\tredSprite.width = 200;\n\t\tredSprite.height = 200;\n\t\tredSprite.castsShadows = false;\n\t\tvar blueSprite:Billboard = new Billboard(this.blueLightMaterial);\n\t\tblueSprite.width = 200;\n\t\tblueSprite.height = 200;\n\t\tblueSprite.castsShadows = false;\n\t\tthis.redLight.addChild(redSprite);\n\t\tthis.blueLight.addChild(blueSprite);\n\n\t\tAssetLibrary.enableParser(MD5MeshParser);\n\t\tAssetLibrary.enableParser(MD5AnimParser);\n\n\t\t//create a rocky ground plane\n\t\tthis.ground = <Mesh> new PrimitivePlanePrefab(50000, 50000, 1, 1).getNewObject();\n\t\tthis.ground.material = this.groundMaterial;\n\t\tthis.ground.geometry.scaleUV(200, 200);\n\t\tthis.ground.castsShadows = false;\n\t\tthis.scene.addChild(this.ground);\n\t}\n\n\t/**\n\t * Initialise the listeners\n\t */\n\tprivate initListeners():void\n\t{\n\t\twindow.onresize  = (event) => this.onResize(event);\n\t\tdocument.onkeydown = (event) => this.onKeyDown(event);\n\t\tdocument.onkeyup = (event) => this.onKeyUp(event);\n\n\t\tthis.onResize();\n\n\t\tthis._timer = new RequestAnimationFrame(this.onEnterFrame, this);\n\t\tthis._timer.start();\n\n\t\t//setup the url map for textures in the cubemap file\n\t\tvar assetLoaderContext:AssetLoaderContext = new AssetLoaderContext();\n\t\tassetLoaderContext.dependencyBaseUrl = \"assets/skybox/\";\n\n\t\t//load hellknight mesh\n\t\tAssetLibrary.addEventListener(AssetEvent.ASSET_COMPLETE, (event:AssetEvent) => this.onAssetComplete(event));\n\t\tAssetLibrary.addEventListener(LoaderEvent.RESOURCE_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n\t\tAssetLibrary.load(new URLRequest(\"assets/hellknight/hellknight.md5mesh\"), null, null, new MD5MeshParser());\n\n\t\t//load environment texture\n\t\tAssetLibrary.load(new URLRequest(\"assets/skybox/grimnight_texture.cube\"), assetLoaderContext);\n\n\t\t//load light textures\n\t\tAssetLibrary.load(new URLRequest(\"assets/redlight.png\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/bluelight.png\"));\n\n\t\t//load floor textures\n\t\tAssetLibrary.load(new URLRequest(\"assets/rockbase_diffuse.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/rockbase_normals.png\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/rockbase_specular.png\"));\n\n\t\t//load hellknight textures\n\t\tAssetLibrary.load(new URLRequest(\"assets/hellknight/hellknight_diffuse.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/hellknight/hellknight_normals.png\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/hellknight/hellknight_specular.png\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/hellknight/gob.png\"));\n\t}\n\n\t/**\n\t * Navigation and render loop\n\t */\n\tprivate onEnterFrame(dt:number):void\n\t{\n\t\tthis._time += dt;\n\n\t\tthis.cameraController.update();\n\n\t\t//update character animation\n\t\tif (this.mesh) {\n\t\t\tthis.mesh.subMeshes[1].uvTransform.offsetV = this.mesh.subMeshes[2].uvTransform.offsetV = this.mesh.subMeshes[3].uvTransform.offsetV = (-this._time/2000 % 1);\n\t\t\tthis.mesh.rotationY += this.currentRotationInc;\n\t\t}\n\n\t\tthis.count += 0.01;\n\n\t\tthis.redLight.x = Math.sin(this.count)*1500;\n\t\tthis.redLight.y = 250 + Math.sin(this.count*0.54)*200;\n\t\tthis.redLight.z = Math.cos(this.count*0.7)*1500;\n\t\tthis.blueLight.x = -Math.sin(this.count*0.8)*1500;\n\t\tthis.blueLight.y = 250 - Math.sin(this.count*.65)*200;\n\t\tthis.blueLight.z = -Math.cos(this.count*0.9)*1500;\n\n\t\tthis.view.render();\n\t}\n\n\t/**\n\t * Listener for asset complete event on loader\n\t */\n\tprivate onAssetComplete(event:AssetEvent):void\n\t{\n\t\tif (event.asset.assetType == AssetType.ANIMATION_NODE) {\n\n\t\t\tvar node:SkeletonClipNode = <SkeletonClipNode> event.asset;\n\t\t\tvar name:string = event.asset.assetNamespace;\n\n\t\t\tnode.name = name;\n\t\t\tthis.animationSet.addAnimation(node);\n\n\t\t\tif (name == Intermediate_MD5Animation.IDLE_NAME || name == Intermediate_MD5Animation.WALK_NAME) {\n\t\t\t\tnode.looping = true;\n\t\t\t} else {\n\t\t\t\tnode.looping = false;\n\t\t\t\tnode.addEventListener(AnimationStateEvent.PLAYBACK_COMPLETE, (event:AnimationStateEvent) => this.onPlaybackComplete(event));\n\t\t\t}\n\n\t\t\tif (name == Intermediate_MD5Animation.IDLE_NAME)\n\t\t\t\tthis.stop();\n\t\t} else if (event.asset.assetType == AssetType.ANIMATION_SET) {\n\t\t\tthis.animationSet = <SkeletonAnimationSet> event.asset;\n\t\t\tthis.animator = new SkeletonAnimator(this.animationSet, this.skeleton);\n\t\t\tfor (var i:number /*uint*/ = 0; i < Intermediate_MD5Animation.ANIM_NAMES.length; ++i)\n\t\t\t\tAssetLibrary.load(new URLRequest(\"assets/hellknight/\" + Intermediate_MD5Animation.ANIM_NAMES[i] + \".md5anim\"), null, Intermediate_MD5Animation.ANIM_NAMES[i], new MD5AnimParser());\n\n\t\t\tthis.mesh.animator = this.animator;\n\t\t} else if (event.asset.assetType == AssetType.SKELETON) {\n\t\t\tthis.skeleton = <Skeleton> event.asset;\n\t\t} else if (event.asset.assetType == AssetType.MESH) {\n\t\t\t//grab mesh object and assign our material object\n\t\t\tthis.mesh = <Mesh> event.asset;\n\t\t\tthis.mesh.subMeshes[0].material = this.bodyMaterial;\n\t\t\tthis.mesh.subMeshes[1].material = this.mesh.subMeshes[2].material = this.mesh.subMeshes[3].material = this.gobMaterial;\n\t\t\tthis.mesh.castsShadows = true;\n\t\t\tthis.mesh.rotationY = 180;\n\t\t\tthis.mesh.subMeshes[1].uvTransform = this.mesh.subMeshes[2].uvTransform = this.mesh.subMeshes[3].uvTransform = new UVTransform();\n\t\t\tthis.scene.addChild(this.mesh);\n\n\t\t\t//add our lookat object to the mesh\n\t\t\tthis.mesh.addChild(this.placeHolder);\n\t\t}\n\t}\n\n\t/**\n\t * Listener function for resource complete event on asset library\n\t */\n\tprivate onResourceComplete (event:LoaderEvent)\n\t{\n\t\tswitch( event.url )\n\t\t{\n\t\t\t//environment texture\n\t\t\tcase 'assets/skybox/grimnight_texture.cube':\n\t\t\t\tthis.cubeTexture = <ImageCubeTexture> event.assets[ 0 ];\n\n\t\t\t\tthis.skyBox = new Skybox(this.cubeTexture);\n\t\t\t\tthis.scene.addChild(this.skyBox);\n\t\t\t\tbreak;\n\n\t\t\t//entities textures\n\t\t\tcase \"assets/redlight.png\" :\n\t\t\t\tthis.redLightMaterial.texture = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tbreak;\n\t\t\tcase \"assets/bluelight.png\" :\n\t\t\t\tthis.blueLightMaterial.texture = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tbreak;\n\n\t\t\t//floor textures\n\t\t\tcase \"assets/rockbase_diffuse.jpg\" :\n\t\t\t\tthis.groundMaterial.texture = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tbreak;\n\t\t\tcase \"assets/rockbase_normals.png\" :\n\t\t\t\tthis.groundMaterial.normalMap = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tbreak;\n\t\t\tcase \"assets/rockbase_specular.png\" :\n\t\t\t\tthis.groundMaterial.specularMap = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tbreak;\n\n\t\t\t//hellknight textures\n\t\t\tcase \"assets/hellknight/hellknight_diffuse.jpg\" :\n\t\t\t\tthis.bodyMaterial.texture = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tbreak;\n\t\t\tcase \"assets/hellknight/hellknight_normals.png\" :\n\t\t\t\tthis.bodyMaterial.normalMap = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tbreak;\n\t\t\tcase \"assets/hellknight/hellknight_specular.png\" :\n\t\t\t\tthis.bodyMaterial.specularMap = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tbreak;\n\t\t\tcase \"assets/hellknight/gob.png\" :\n\t\t\t\tthis.bodyMaterial.specularMap = this.gobMaterial.texture = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate onPlaybackComplete(event:AnimationStateEvent):void\n\t{\n\t\tif (this.animator.activeState != event.animationState)\n\t\t\treturn;\n\n\t\tthis.onceAnim = null;\n\n\t\tthis.animator.play(this.currentAnim, this.stateTransition);\n\t\tthis.animator.playbackSpeed = this.isMoving? this.movementDirection*(this.isRunning? Intermediate_MD5Animation.RUN_SPEED : Intermediate_MD5Animation.WALK_SPEED) : Intermediate_MD5Animation.IDLE_SPEED;\n\t}\n\n\tprivate playAction(val:number /*uint*/):void\n\t{\n\t\tthis.onceAnim = Intermediate_MD5Animation.ANIM_NAMES[val + 2];\n\t\tthis.animator.playbackSpeed = Intermediate_MD5Animation.ACTION_SPEED;\n\t\tthis.animator.play(this.onceAnim, this.stateTransition, 0);\n\t}\n\n\t/**\n\t * Key up listener\n\t */\n\tprivate onKeyDown(event):void\n\t{\n\t\tswitch (event.keyCode) {\n\t\t\tcase Keyboard.SHIFT:\n\t\t\t\tthis.isRunning = true;\n\t\t\t\tif (this.isMoving)\n\t\t\t\t\tthis.updateMovement(this.movementDirection);\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.UP:\n\t\t\tcase Keyboard.W:\n\t\t\tcase Keyboard.Z: //fr\n\t\t\t\tthis.updateMovement(this.movementDirection = 1);\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.DOWN:\n\t\t\tcase Keyboard.S:\n\t\t\t\tthis.updateMovement(this.movementDirection = -1);\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.LEFT:\n\t\t\tcase Keyboard.A:\n\t\t\tcase Keyboard.Q: //fr\n\t\t\t\tthis.currentRotationInc = -Intermediate_MD5Animation.ROTATION_SPEED;\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.RIGHT:\n\t\t\tcase Keyboard.D:\n\t\t\t\tthis.currentRotationInc = Intermediate_MD5Animation.ROTATION_SPEED;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Key down listener for animation\n\t */\n\tprivate onKeyUp(event):void\n\t{\n\t\tswitch (event.keyCode) {\n\t\t\tcase Keyboard.SHIFT:\n\t\t\t\tthis.isRunning = false;\n\t\t\t\tif (this.isMoving)\n\t\t\t\t\tthis.updateMovement(this.movementDirection);\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.UP:\n\t\t\tcase Keyboard.W:\n\t\t\tcase Keyboard.Z: //fr\n\t\t\tcase Keyboard.DOWN:\n\t\t\tcase Keyboard.S:\n\t\t\t\tthis.stop();\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.LEFT:\n\t\t\tcase Keyboard.A:\n\t\t\tcase Keyboard.Q: //fr\n\t\t\tcase Keyboard.RIGHT:\n\t\t\tcase Keyboard.D:\n\t\t\t\tthis.currentRotationInc = 0;\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.NUMBER_1:\n\t\t\t\tthis.playAction(1);\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.NUMBER_2:\n\t\t\t\tthis.playAction(2);\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.NUMBER_3:\n\t\t\t\tthis.playAction(3);\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.NUMBER_4:\n\t\t\t\tthis.playAction(4);\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.NUMBER_5:\n\t\t\t\tthis.playAction(5);\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.NUMBER_6:\n\t\t\t\tthis.playAction(6);\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.NUMBER_7:\n\t\t\t\tthis.playAction(7);\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.NUMBER_8:\n\t\t\t\tthis.playAction(8);\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.NUMBER_9:\n\t\t\t\tthis.playAction(9);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate updateMovement(dir:number):void\n\t{\n\t\tthis.isMoving = true;\n\t\tthis.animator.playbackSpeed = dir*(this.isRunning? Intermediate_MD5Animation.RUN_SPEED : Intermediate_MD5Animation.WALK_SPEED);\n\n\t\tif (this.currentAnim == Intermediate_MD5Animation.WALK_NAME)\n\t\t\treturn;\n\n\t\tthis.currentAnim = Intermediate_MD5Animation.WALK_NAME;\n\n\t\tif (this.onceAnim)\n\t\t\treturn;\n\n\t\t//update animator\n\t\tthis.animator.play(this.currentAnim, this.stateTransition);\n\t}\n\n\tprivate stop():void\n\t{\n\t\tthis.isMoving = false;\n\n\t\tif (this.currentAnim == Intermediate_MD5Animation.IDLE_NAME)\n\t\t\treturn;\n\n\t\tthis.currentAnim = Intermediate_MD5Animation.IDLE_NAME;\n\n\t\tif (this.onceAnim)\n\t\t\treturn;\n\n\t\t//update animator\n\t\tthis.animator.playbackSpeed = Intermediate_MD5Animation.IDLE_SPEED;\n\t\tthis.animator.play(this.currentAnim, this.stateTransition);\n\t}\n\n\t/**\n\t * stage listener for resize events\n\t */\n\tprivate onResize(event:Event = null):void\n\t{\n\t\tthis.view.width = window.innerWidth;\n\t\tthis.view.height = window.innerHeight;\n\t}\n}\n\n\nwindow.onload = function ()\n{\n\tnew Intermediate_MD5Animation();\n}\n\n",
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*\r\n\r\nMD5 animation loading and interaction example in Away3d\r\n\r\nDemonstrates:\r\n\r\nHow to load MD5 mesh and anim files with bones animation from embedded resources.\r\nHow to map animation data after loading in order to playback an animation sequence.\r\nHow to control the movement of a game character using keys.\r\n\r\nCode by Rob Bateman & David Lenaerts\r\nrob@infiniteturtles.co.uk\r\nhttp://www.infiniteturtles.co.uk\r\ndavid.lenaerts@gmail.com\r\nhttp://www.derschmale.com\r\n\r\nThis code is distributed under the MIT License\r\n\r\nCopyright (c) The Away Foundation http://www.theawayfoundation.org\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the “Software”), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n\r\n*/\r\nvar AssetEvent = require(\"awayjs-core/lib/events/AssetEvent\");\r\nvar LoaderEvent = require(\"awayjs-core/lib/events/LoaderEvent\");\r\nvar UVTransform = require(\"awayjs-core/lib/geom/UVTransform\");\r\nvar AssetLibrary = require(\"awayjs-core/lib/library/AssetLibrary\");\r\nvar AssetLoaderContext = require(\"awayjs-core/lib/library/AssetLoaderContext\");\r\nvar AssetType = require(\"awayjs-core/lib/library/AssetType\");\r\nvar URLRequest = require(\"awayjs-core/lib/net/URLRequest\");\r\nvar Keyboard = require(\"awayjs-core/lib/ui/Keyboard\");\r\nvar RequestAnimationFrame = require(\"awayjs-core/lib/utils/RequestAnimationFrame\");\r\nvar DisplayObjectContainer = require(\"awayjs-display/lib/containers/DisplayObjectContainer\");\r\nvar View = require(\"awayjs-display/lib/containers/View\");\r\nvar LookAtController = require(\"awayjs-display/lib/controllers/LookAtController\");\r\nvar DirectionalLight = require(\"awayjs-display/lib/entities/DirectionalLight\");\r\nvar Billboard = require(\"awayjs-display/lib/entities/Billboard\");\r\nvar PointLight = require(\"awayjs-display/lib/entities/PointLight\");\r\nvar Skybox = require(\"awayjs-display/lib/entities/Skybox\");\r\nvar NearDirectionalShadowMapper = require(\"awayjs-display/lib/materials/shadowmappers/NearDirectionalShadowMapper\");\r\nvar StaticLightPicker = require(\"awayjs-display/lib/materials/lightpickers/StaticLightPicker\");\r\nvar PrimitivePlanePrefab = require(\"awayjs-display/lib/prefabs/PrimitivePlanePrefab\");\r\nvar SkeletonAnimator = require(\"awayjs-renderergl/lib/animators/SkeletonAnimator\");\r\nvar CrossfadeTransition = require(\"awayjs-renderergl/lib/animators/transitions/CrossfadeTransition\");\r\nvar AnimationStateEvent = require(\"awayjs-renderergl/lib/events/AnimationStateEvent\");\r\nvar DefaultRenderer = require(\"awayjs-renderergl/lib/DefaultRenderer\");\r\nvar MethodMaterial = require(\"awayjs-methodmaterials/lib/MethodMaterial\");\r\nvar MethodRendererPool = require(\"awayjs-methodmaterials/lib/pool/MethodRendererPool\");\r\nvar EffectFogMethod = require(\"awayjs-methodmaterials/lib/methods/EffectFogMethod\");\r\nvar ShadowNearMethod = require(\"awayjs-methodmaterials/lib/methods/ShadowNearMethod\");\r\nvar ShadowSoftMethod = require(\"awayjs-methodmaterials/lib/methods/ShadowSoftMethod\");\r\nvar MD5AnimParser = require(\"awayjs-parsers/lib/MD5AnimParser\");\r\nvar MD5MeshParser = require(\"awayjs-parsers/lib/MD5MeshParser\");\r\nvar Intermediate_MD5Animation = (function () {\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Intermediate_MD5Animation() {\r\n        this.stateTransition = new CrossfadeTransition(0.5);\r\n        this.currentRotationInc = 0;\r\n        this.count = 0;\r\n        this._time = 0;\r\n        this.init();\r\n    }\r\n    /**\r\n     * Global initialise function\r\n     */\r\n    Intermediate_MD5Animation.prototype.init = function () {\r\n        this.initEngine();\r\n        //this.initText();\r\n        this.initLights();\r\n        this.initMaterials();\r\n        this.initObjects();\r\n        this.initListeners();\r\n    };\r\n    /**\r\n     * Initialise the engine\r\n     */\r\n    Intermediate_MD5Animation.prototype.initEngine = function () {\r\n        this.view = new View(new DefaultRenderer(MethodRendererPool));\r\n        this.scene = this.view.scene;\r\n        this.camera = this.view.camera;\r\n        this.camera.projection.far = 5000;\r\n        this.camera.z = -200;\r\n        this.camera.y = 160;\r\n        //setup controller to be used on the camera\r\n        this.placeHolder = new DisplayObjectContainer();\r\n        this.placeHolder.y = 50;\r\n        this.cameraController = new LookAtController(this.camera, this.placeHolder);\r\n    };\r\n    /**\r\n     * Create an instructions overlay\r\n     */\r\n    //\t\tprivate initText():void\r\n    //\t\t{\r\n    //\t\t\ttext = new TextField();\r\n    //\t\t\ttext.defaultTextFormat = new TextFormat(\"Verdana\", 11, 0xFFFFFF);\r\n    //\t\t\ttext.width = 240;\r\n    //\t\t\ttext.height = 100;\r\n    //\t\t\ttext.selectable = false;\r\n    //\t\t\ttext.mouseEnabled = false;\r\n    //\t\t\ttext.text = \"Cursor keys / WSAD - move\\n\";\r\n    //\t\t\ttext.appendText(\"SHIFT - hold down to run\\n\");\r\n    //\t\t\ttext.appendText(\"numbers 1-9 - Attack\\n\");\r\n    //\t\t\ttext.filters = [new DropShadowFilter(1, 45, 0x0, 1, 0, 0)];\r\n    //\r\n    //\t\t\taddChild(text);\r\n    //\t\t}\r\n    /**\r\n     * Initialise the entities\r\n     */\r\n    Intermediate_MD5Animation.prototype.initLights = function () {\r\n        //create a light for shadows that mimics the sun's position in the skybox\r\n        this.redLight = new PointLight();\r\n        this.redLight.x = -1000;\r\n        this.redLight.y = 200;\r\n        this.redLight.z = -1400;\r\n        this.redLight.color = 0xff1111;\r\n        this.scene.addChild(this.redLight);\r\n        this.blueLight = new PointLight();\r\n        this.blueLight.x = 1000;\r\n        this.blueLight.y = 200;\r\n        this.blueLight.z = 1400;\r\n        this.blueLight.color = 0x1111ff;\r\n        this.scene.addChild(this.blueLight);\r\n        this.whiteLight = new DirectionalLight(-50, -20, 10);\r\n        this.whiteLight.color = 0xffffee;\r\n        this.whiteLight.castsShadows = true;\r\n        this.whiteLight.ambient = 1;\r\n        this.whiteLight.ambientColor = 0x303040;\r\n        this.whiteLight.shadowMapper = new NearDirectionalShadowMapper(.2);\r\n        this.scene.addChild(this.whiteLight);\r\n        this.lightPicker = new StaticLightPicker([this.redLight, this.blueLight, this.whiteLight]);\r\n        //create a global shadow method\r\n        this.shadowMapMethod = new ShadowNearMethod(new ShadowSoftMethod(this.whiteLight, 15, 8));\r\n        this.shadowMapMethod.epsilon = .1;\r\n        //create a global fog method\r\n        this.fogMethod = new EffectFogMethod(0, this.camera.projection.far * 0.5, 0x000000);\r\n    };\r\n    /**\r\n     * Initialise the materials\r\n     */\r\n    Intermediate_MD5Animation.prototype.initMaterials = function () {\r\n        //red light material\r\n        this.redLightMaterial = new MethodMaterial();\r\n        this.redLightMaterial.alphaBlending = true;\r\n        this.redLightMaterial.addEffectMethod(this.fogMethod);\r\n        //blue light material\r\n        this.blueLightMaterial = new MethodMaterial();\r\n        this.blueLightMaterial.alphaBlending = true;\r\n        this.blueLightMaterial.addEffectMethod(this.fogMethod);\r\n        //ground material\r\n        this.groundMaterial = new MethodMaterial();\r\n        this.groundMaterial.smooth = true;\r\n        this.groundMaterial.repeat = true;\r\n        this.groundMaterial.lightPicker = this.lightPicker;\r\n        this.groundMaterial.shadowMethod = this.shadowMapMethod;\r\n        this.groundMaterial.addEffectMethod(this.fogMethod);\r\n        //body material\r\n        this.bodyMaterial = new MethodMaterial();\r\n        this.bodyMaterial.gloss = 20;\r\n        this.bodyMaterial.specular = 1.5;\r\n        this.bodyMaterial.addEffectMethod(this.fogMethod);\r\n        this.bodyMaterial.lightPicker = this.lightPicker;\r\n        this.bodyMaterial.shadowMethod = this.shadowMapMethod;\r\n        //gob material\r\n        this.gobMaterial = new MethodMaterial();\r\n        this.gobMaterial.alphaBlending = true;\r\n        this.gobMaterial.smooth = true;\r\n        this.gobMaterial.repeat = true;\r\n        this.gobMaterial.animateUVs = true;\r\n        this.gobMaterial.addEffectMethod(this.fogMethod);\r\n        this.gobMaterial.lightPicker = this.lightPicker;\r\n        this.gobMaterial.shadowMethod = this.shadowMapMethod;\r\n    };\r\n    /**\r\n     * Initialise the scene objects\r\n     */\r\n    Intermediate_MD5Animation.prototype.initObjects = function () {\r\n        //create light billboards\r\n        var redSprite = new Billboard(this.redLightMaterial);\r\n        redSprite.width = 200;\r\n        redSprite.height = 200;\r\n        redSprite.castsShadows = false;\r\n        var blueSprite = new Billboard(this.blueLightMaterial);\r\n        blueSprite.width = 200;\r\n        blueSprite.height = 200;\r\n        blueSprite.castsShadows = false;\r\n        this.redLight.addChild(redSprite);\r\n        this.blueLight.addChild(blueSprite);\r\n        AssetLibrary.enableParser(MD5MeshParser);\r\n        AssetLibrary.enableParser(MD5AnimParser);\r\n        //create a rocky ground plane\r\n        this.ground = new PrimitivePlanePrefab(50000, 50000, 1, 1).getNewObject();\r\n        this.ground.material = this.groundMaterial;\r\n        this.ground.geometry.scaleUV(200, 200);\r\n        this.ground.castsShadows = false;\r\n        this.scene.addChild(this.ground);\r\n    };\r\n    /**\r\n     * Initialise the listeners\r\n     */\r\n    Intermediate_MD5Animation.prototype.initListeners = function () {\r\n        var _this = this;\r\n        window.onresize = function (event) { return _this.onResize(event); };\r\n        document.onkeydown = function (event) { return _this.onKeyDown(event); };\r\n        document.onkeyup = function (event) { return _this.onKeyUp(event); };\r\n        this.onResize();\r\n        this._timer = new RequestAnimationFrame(this.onEnterFrame, this);\r\n        this._timer.start();\r\n        //setup the url map for textures in the cubemap file\r\n        var assetLoaderContext = new AssetLoaderContext();\r\n        assetLoaderContext.dependencyBaseUrl = \"assets/skybox/\";\r\n        //load hellknight mesh\r\n        AssetLibrary.addEventListener(AssetEvent.ASSET_COMPLETE, function (event) { return _this.onAssetComplete(event); });\r\n        AssetLibrary.addEventListener(LoaderEvent.RESOURCE_COMPLETE, function (event) { return _this.onResourceComplete(event); });\r\n        AssetLibrary.load(new URLRequest(\"assets/hellknight/hellknight.md5mesh\"), null, null, new MD5MeshParser());\r\n        //load environment texture\r\n        AssetLibrary.load(new URLRequest(\"assets/skybox/grimnight_texture.cube\"), assetLoaderContext);\r\n        //load light textures\r\n        AssetLibrary.load(new URLRequest(\"assets/redlight.png\"));\r\n        AssetLibrary.load(new URLRequest(\"assets/bluelight.png\"));\r\n        //load floor textures\r\n        AssetLibrary.load(new URLRequest(\"assets/rockbase_diffuse.jpg\"));\r\n        AssetLibrary.load(new URLRequest(\"assets/rockbase_normals.png\"));\r\n        AssetLibrary.load(new URLRequest(\"assets/rockbase_specular.png\"));\r\n        //load hellknight textures\r\n        AssetLibrary.load(new URLRequest(\"assets/hellknight/hellknight_diffuse.jpg\"));\r\n        AssetLibrary.load(new URLRequest(\"assets/hellknight/hellknight_normals.png\"));\r\n        AssetLibrary.load(new URLRequest(\"assets/hellknight/hellknight_specular.png\"));\r\n        AssetLibrary.load(new URLRequest(\"assets/hellknight/gob.png\"));\r\n    };\r\n    /**\r\n     * Navigation and render loop\r\n     */\r\n    Intermediate_MD5Animation.prototype.onEnterFrame = function (dt) {\r\n        this._time += dt;\r\n        this.cameraController.update();\r\n        //update character animation\r\n        if (this.mesh) {\r\n            this.mesh.subMeshes[1].uvTransform.offsetV = this.mesh.subMeshes[2].uvTransform.offsetV = this.mesh.subMeshes[3].uvTransform.offsetV = (-this._time / 2000 % 1);\r\n            this.mesh.rotationY += this.currentRotationInc;\r\n        }\r\n        this.count += 0.01;\r\n        this.redLight.x = Math.sin(this.count) * 1500;\r\n        this.redLight.y = 250 + Math.sin(this.count * 0.54) * 200;\r\n        this.redLight.z = Math.cos(this.count * 0.7) * 1500;\r\n        this.blueLight.x = -Math.sin(this.count * 0.8) * 1500;\r\n        this.blueLight.y = 250 - Math.sin(this.count * .65) * 200;\r\n        this.blueLight.z = -Math.cos(this.count * 0.9) * 1500;\r\n        this.view.render();\r\n    };\r\n    /**\r\n     * Listener for asset complete event on loader\r\n     */\r\n    Intermediate_MD5Animation.prototype.onAssetComplete = function (event) {\r\n        var _this = this;\r\n        if (event.asset.assetType == AssetType.ANIMATION_NODE) {\r\n            var node = event.asset;\r\n            var name = event.asset.assetNamespace;\r\n            node.name = name;\r\n            this.animationSet.addAnimation(node);\r\n            if (name == Intermediate_MD5Animation.IDLE_NAME || name == Intermediate_MD5Animation.WALK_NAME) {\r\n                node.looping = true;\r\n            }\r\n            else {\r\n                node.looping = false;\r\n                node.addEventListener(AnimationStateEvent.PLAYBACK_COMPLETE, function (event) { return _this.onPlaybackComplete(event); });\r\n            }\r\n            if (name == Intermediate_MD5Animation.IDLE_NAME)\r\n                this.stop();\r\n        }\r\n        else if (event.asset.assetType == AssetType.ANIMATION_SET) {\r\n            this.animationSet = event.asset;\r\n            this.animator = new SkeletonAnimator(this.animationSet, this.skeleton);\r\n            for (var i = 0; i < Intermediate_MD5Animation.ANIM_NAMES.length; ++i)\r\n                AssetLibrary.load(new URLRequest(\"assets/hellknight/\" + Intermediate_MD5Animation.ANIM_NAMES[i] + \".md5anim\"), null, Intermediate_MD5Animation.ANIM_NAMES[i], new MD5AnimParser());\r\n            this.mesh.animator = this.animator;\r\n        }\r\n        else if (event.asset.assetType == AssetType.SKELETON) {\r\n            this.skeleton = event.asset;\r\n        }\r\n        else if (event.asset.assetType == AssetType.MESH) {\r\n            //grab mesh object and assign our material object\r\n            this.mesh = event.asset;\r\n            this.mesh.subMeshes[0].material = this.bodyMaterial;\r\n            this.mesh.subMeshes[1].material = this.mesh.subMeshes[2].material = this.mesh.subMeshes[3].material = this.gobMaterial;\r\n            this.mesh.castsShadows = true;\r\n            this.mesh.rotationY = 180;\r\n            this.mesh.subMeshes[1].uvTransform = this.mesh.subMeshes[2].uvTransform = this.mesh.subMeshes[3].uvTransform = new UVTransform();\r\n            this.scene.addChild(this.mesh);\r\n            //add our lookat object to the mesh\r\n            this.mesh.addChild(this.placeHolder);\r\n        }\r\n    };\r\n    /**\r\n     * Listener function for resource complete event on asset library\r\n     */\r\n    Intermediate_MD5Animation.prototype.onResourceComplete = function (event) {\r\n        switch (event.url) {\r\n            case 'assets/skybox/grimnight_texture.cube':\r\n                this.cubeTexture = event.assets[0];\r\n                this.skyBox = new Skybox(this.cubeTexture);\r\n                this.scene.addChild(this.skyBox);\r\n                break;\r\n            case \"assets/redlight.png\":\r\n                this.redLightMaterial.texture = event.assets[0];\r\n                break;\r\n            case \"assets/bluelight.png\":\r\n                this.blueLightMaterial.texture = event.assets[0];\r\n                break;\r\n            case \"assets/rockbase_diffuse.jpg\":\r\n                this.groundMaterial.texture = event.assets[0];\r\n                break;\r\n            case \"assets/rockbase_normals.png\":\r\n                this.groundMaterial.normalMap = event.assets[0];\r\n                break;\r\n            case \"assets/rockbase_specular.png\":\r\n                this.groundMaterial.specularMap = event.assets[0];\r\n                break;\r\n            case \"assets/hellknight/hellknight_diffuse.jpg\":\r\n                this.bodyMaterial.texture = event.assets[0];\r\n                break;\r\n            case \"assets/hellknight/hellknight_normals.png\":\r\n                this.bodyMaterial.normalMap = event.assets[0];\r\n                break;\r\n            case \"assets/hellknight/hellknight_specular.png\":\r\n                this.bodyMaterial.specularMap = event.assets[0];\r\n                break;\r\n            case \"assets/hellknight/gob.png\":\r\n                this.bodyMaterial.specularMap = this.gobMaterial.texture = event.assets[0];\r\n                break;\r\n        }\r\n    };\r\n    Intermediate_MD5Animation.prototype.onPlaybackComplete = function (event) {\r\n        if (this.animator.activeState != event.animationState)\r\n            return;\r\n        this.onceAnim = null;\r\n        this.animator.play(this.currentAnim, this.stateTransition);\r\n        this.animator.playbackSpeed = this.isMoving ? this.movementDirection * (this.isRunning ? Intermediate_MD5Animation.RUN_SPEED : Intermediate_MD5Animation.WALK_SPEED) : Intermediate_MD5Animation.IDLE_SPEED;\r\n    };\r\n    Intermediate_MD5Animation.prototype.playAction = function (val /*uint*/) {\r\n        this.onceAnim = Intermediate_MD5Animation.ANIM_NAMES[val + 2];\r\n        this.animator.playbackSpeed = Intermediate_MD5Animation.ACTION_SPEED;\r\n        this.animator.play(this.onceAnim, this.stateTransition, 0);\r\n    };\r\n    /**\r\n     * Key up listener\r\n     */\r\n    Intermediate_MD5Animation.prototype.onKeyDown = function (event) {\r\n        switch (event.keyCode) {\r\n            case Keyboard.SHIFT:\r\n                this.isRunning = true;\r\n                if (this.isMoving)\r\n                    this.updateMovement(this.movementDirection);\r\n                break;\r\n            case Keyboard.UP:\r\n            case Keyboard.W:\r\n            case Keyboard.Z:\r\n                this.updateMovement(this.movementDirection = 1);\r\n                break;\r\n            case Keyboard.DOWN:\r\n            case Keyboard.S:\r\n                this.updateMovement(this.movementDirection = -1);\r\n                break;\r\n            case Keyboard.LEFT:\r\n            case Keyboard.A:\r\n            case Keyboard.Q:\r\n                this.currentRotationInc = -Intermediate_MD5Animation.ROTATION_SPEED;\r\n                break;\r\n            case Keyboard.RIGHT:\r\n            case Keyboard.D:\r\n                this.currentRotationInc = Intermediate_MD5Animation.ROTATION_SPEED;\r\n                break;\r\n        }\r\n    };\r\n    /**\r\n     * Key down listener for animation\r\n     */\r\n    Intermediate_MD5Animation.prototype.onKeyUp = function (event) {\r\n        switch (event.keyCode) {\r\n            case Keyboard.SHIFT:\r\n                this.isRunning = false;\r\n                if (this.isMoving)\r\n                    this.updateMovement(this.movementDirection);\r\n                break;\r\n            case Keyboard.UP:\r\n            case Keyboard.W:\r\n            case Keyboard.Z:\r\n            case Keyboard.DOWN:\r\n            case Keyboard.S:\r\n                this.stop();\r\n                break;\r\n            case Keyboard.LEFT:\r\n            case Keyboard.A:\r\n            case Keyboard.Q:\r\n            case Keyboard.RIGHT:\r\n            case Keyboard.D:\r\n                this.currentRotationInc = 0;\r\n                break;\r\n            case Keyboard.NUMBER_1:\r\n                this.playAction(1);\r\n                break;\r\n            case Keyboard.NUMBER_2:\r\n                this.playAction(2);\r\n                break;\r\n            case Keyboard.NUMBER_3:\r\n                this.playAction(3);\r\n                break;\r\n            case Keyboard.NUMBER_4:\r\n                this.playAction(4);\r\n                break;\r\n            case Keyboard.NUMBER_5:\r\n                this.playAction(5);\r\n                break;\r\n            case Keyboard.NUMBER_6:\r\n                this.playAction(6);\r\n                break;\r\n            case Keyboard.NUMBER_7:\r\n                this.playAction(7);\r\n                break;\r\n            case Keyboard.NUMBER_8:\r\n                this.playAction(8);\r\n                break;\r\n            case Keyboard.NUMBER_9:\r\n                this.playAction(9);\r\n                break;\r\n        }\r\n    };\r\n    Intermediate_MD5Animation.prototype.updateMovement = function (dir) {\r\n        this.isMoving = true;\r\n        this.animator.playbackSpeed = dir * (this.isRunning ? Intermediate_MD5Animation.RUN_SPEED : Intermediate_MD5Animation.WALK_SPEED);\r\n        if (this.currentAnim == Intermediate_MD5Animation.WALK_NAME)\r\n            return;\r\n        this.currentAnim = Intermediate_MD5Animation.WALK_NAME;\r\n        if (this.onceAnim)\r\n            return;\r\n        //update animator\r\n        this.animator.play(this.currentAnim, this.stateTransition);\r\n    };\r\n    Intermediate_MD5Animation.prototype.stop = function () {\r\n        this.isMoving = false;\r\n        if (this.currentAnim == Intermediate_MD5Animation.IDLE_NAME)\r\n            return;\r\n        this.currentAnim = Intermediate_MD5Animation.IDLE_NAME;\r\n        if (this.onceAnim)\r\n            return;\r\n        //update animator\r\n        this.animator.playbackSpeed = Intermediate_MD5Animation.IDLE_SPEED;\r\n        this.animator.play(this.currentAnim, this.stateTransition);\r\n    };\r\n    /**\r\n     * stage listener for resize events\r\n     */\r\n    Intermediate_MD5Animation.prototype.onResize = function (event) {\r\n        if (event === void 0) { event = null; }\r\n        this.view.width = window.innerWidth;\r\n        this.view.height = window.innerHeight;\r\n    };\r\n    //animation constants\r\n    Intermediate_MD5Animation.IDLE_NAME = \"idle2\";\r\n    Intermediate_MD5Animation.WALK_NAME = \"walk7\";\r\n    Intermediate_MD5Animation.ANIM_NAMES = new Array(Intermediate_MD5Animation.IDLE_NAME, Intermediate_MD5Animation.WALK_NAME, \"attack3\", \"turret_attack\", \"attack2\", \"chest\", \"roar1\", \"leftslash\", \"headpain\", \"pain1\", \"pain_luparm\", \"range_attack2\");\r\n    Intermediate_MD5Animation.ROTATION_SPEED = 3;\r\n    Intermediate_MD5Animation.RUN_SPEED = 2;\r\n    Intermediate_MD5Animation.WALK_SPEED = 1;\r\n    Intermediate_MD5Animation.IDLE_SPEED = 1;\r\n    Intermediate_MD5Animation.ACTION_SPEED = 1;\r\n    return Intermediate_MD5Animation;\r\n})();\r\nwindow.onload = function () {\r\n    new Intermediate_MD5Animation();\r\n};\r\n\r\n\n},{\"awayjs-core/lib/events/AssetEvent\":undefined,\"awayjs-core/lib/events/LoaderEvent\":undefined,\"awayjs-core/lib/geom/UVTransform\":undefined,\"awayjs-core/lib/library/AssetLibrary\":undefined,\"awayjs-core/lib/library/AssetLoaderContext\":undefined,\"awayjs-core/lib/library/AssetType\":undefined,\"awayjs-core/lib/net/URLRequest\":undefined,\"awayjs-core/lib/ui/Keyboard\":undefined,\"awayjs-core/lib/utils/RequestAnimationFrame\":undefined,\"awayjs-display/lib/containers/DisplayObjectContainer\":undefined,\"awayjs-display/lib/containers/View\":undefined,\"awayjs-display/lib/controllers/LookAtController\":undefined,\"awayjs-display/lib/entities/Billboard\":undefined,\"awayjs-display/lib/entities/DirectionalLight\":undefined,\"awayjs-display/lib/entities/PointLight\":undefined,\"awayjs-display/lib/entities/Skybox\":undefined,\"awayjs-display/lib/materials/lightpickers/StaticLightPicker\":undefined,\"awayjs-display/lib/materials/shadowmappers/NearDirectionalShadowMapper\":undefined,\"awayjs-display/lib/prefabs/PrimitivePlanePrefab\":undefined,\"awayjs-methodmaterials/lib/MethodMaterial\":undefined,\"awayjs-methodmaterials/lib/methods/EffectFogMethod\":undefined,\"awayjs-methodmaterials/lib/methods/ShadowNearMethod\":undefined,\"awayjs-methodmaterials/lib/methods/ShadowSoftMethod\":undefined,\"awayjs-methodmaterials/lib/pool/MethodRendererPool\":undefined,\"awayjs-parsers/lib/MD5AnimParser\":undefined,\"awayjs-parsers/lib/MD5MeshParser\":undefined,\"awayjs-renderergl/lib/DefaultRenderer\":undefined,\"awayjs-renderergl/lib/animators/SkeletonAnimator\":undefined,\"awayjs-renderergl/lib/animators/transitions/CrossfadeTransition\":undefined,\"awayjs-renderergl/lib/events/AnimationStateEvent\":undefined}]},{},[1])\n\n\n//# sourceMappingURL=Intermediate_MD5Animation.js.map"
  ],
  "sourceRoot": ""
}